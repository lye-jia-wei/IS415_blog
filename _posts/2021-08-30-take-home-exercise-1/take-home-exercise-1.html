<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
  <title>Take-home Exercise 1</title>

  <meta property="description" itemprop="description" content="A short description of the post."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2021-08-30"/>
  <meta property="article:created" itemprop="dateCreated" content="2021-08-30"/>
  <meta name="article:author" content="Lye Jia Wei"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Take-home Exercise 1"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="A short description of the post."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Take-home Exercise 1"/>
  <meta property="twitter:description" content="A short description of the post."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Take-home Exercise 1"]},{"type":"character","attributes":{},"value":["A short description of the post.\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Lye Jia Wei"]},{"type":"character","attributes":{},"value":["https://lye-jia-wei.github.io/"]}]}]},{"type":"character","attributes":{},"value":["08-30-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["Covd_Cases_Animation.gif","Covd_Death_Animation.gif","data/aspatial/Standar Kelurahan Data Corona (28 Februari 2021 Pukul 10.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (30 April 2020 Pukul 09.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (30 April 2021 Pukul 10.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (30 Juni 2020 Pukul 09.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (30 Juni 2021 Pukul 10.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (30 November 2020 Pukul 10.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (30 September 2020 Pukul 10.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (31 Agustus 2020 Pukul 10.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (31 Desember 2020 Pukul 10.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (31 Juli 2020 Pukul 09.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (31 Juli 2021 Pukul 10.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (31 Maret 2020 Pukul 08.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (31 Maret 2021 Pukul 10.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (31 MEI 2020 Pukul 09.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (31 Mei 2021 Pukul 10.00).xlsx","data/aspatial/Standar Kelurahan Data Corona (31 Oktober 2020 Pukul 10.00).xlsx","data/geospatial/BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA.cpg","data/geospatial/BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA.dbf","data/geospatial/BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA.prj","data/geospatial/BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA.sbn","data/geospatial/BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA.sbx","data/geospatial/BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA.shp","data/geospatial/BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA.shp.xml","data/geospatial/BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA.shx","take-home-exercise-1_files/anchor-4.2.2/anchor.min.js","take-home-exercise-1_files/bowser-1.9.3/bowser.min.js","take-home-exercise-1_files/distill-2.2.21/template.v2.js","take-home-exercise-1_files/figure-html5/unnamed-chunk-28-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-29-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-31-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-32-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-34-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-37-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-38-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-39-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-43-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-44-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-47-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-48-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-49-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-50-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-7-1.png","take-home-exercise-1_files/figure-html5/unnamed-chunk-8-1.png","take-home-exercise-1_files/header-attrs-2.10/header-attrs.js","take-home-exercise-1_files/htmlwidgets-1.5.3/htmlwidgets.js","take-home-exercise-1_files/jquery-1.11.3/jquery.min.js","take-home-exercise-1_files/jquery-1.12.4/jquery.min.js","take-home-exercise-1_files/leaflet-1.3.1/images/layers-2x.png","take-home-exercise-1_files/leaflet-1.3.1/images/layers.png","take-home-exercise-1_files/leaflet-1.3.1/images/marker-icon-2x.png","take-home-exercise-1_files/leaflet-1.3.1/images/marker-icon.png","take-home-exercise-1_files/leaflet-1.3.1/images/marker-shadow.png","take-home-exercise-1_files/leaflet-1.3.1/leaflet.css","take-home-exercise-1_files/leaflet-1.3.1/leaflet.js","take-home-exercise-1_files/leaflet-binding-2.0.4.1/leaflet.js","take-home-exercise-1_files/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js","take-home-exercise-1_files/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js","take-home-exercise-1_files/leafletfix-1.0.0/leafletfix.css","take-home-exercise-1_files/popper-2.6.0/popper.min.js","take-home-exercise-1_files/proj4-2.6.2/proj4.min.js","take-home-exercise-1_files/Proj4Leaflet-1.0.1/proj4leaflet.js","take-home-exercise-1_files/rstudio_leaflet-1.3.1/images/1px.png","take-home-exercise-1_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css","take-home-exercise-1_files/tippy-6.2.7/tippy-bundle.umd.min.js","take-home-exercise-1_files/tippy-6.2.7/tippy-light-border.css","take-home-exercise-1_files/tippy-6.2.7/tippy.css","take-home-exercise-1_files/tippy-6.2.7/tippy.umd.min.js","take-home-exercise-1_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="take-home-exercise-1_files/header-attrs-2.10/header-attrs.js"></script>
  <script src="take-home-exercise-1_files/jquery-1.11.3/jquery.min.js"></script>
  <script src="take-home-exercise-1_files/popper-2.6.0/popper.min.js"></script>
  <link href="take-home-exercise-1_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="take-home-exercise-1_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="take-home-exercise-1_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="take-home-exercise-1_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="take-home-exercise-1_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="take-home-exercise-1_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="take-home-exercise-1_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Take-home Exercise 1","description":"A short description of the post.","authors":[{"author":"Lye Jia Wei","authorURL":"https://lye-jia-wei.github.io/","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-08-30T00:00:00.000+08:00","citationText":"Wei, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Take-home Exercise 1</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>A short description of the post.</p></p>
</div>

<div class="d-byline">
  Lye Jia Wei <a href="https://lye-jia-wei.github.io/" class="uri">https://lye-jia-wei.github.io/</a> 
  
<br/>08-30-2021
</div>

<div class="d-article">
<h2 id="overview">1. Overview</h2>
<p>Since late December 2019, an outbreak of a novel coronavirus disease (COVID-19; previously known as 2019-nCoV) was reported in Wuhan, China, which had subsequently affected 210 countries worldwide. In general, COVID-19 is an acute resolved disease but it can also be deadly, with a 2% case fatality rate.</p>
<p>The COVID-19 pandemic in Indonesia is part of the ongoing worldwide pandemic of coronavirus disease 2019 (COVID-19) caused by severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2). The virus was confirmed to have reached Indonesia on March 2, 2020. It started with two cases in March. As of July 31 2021, there had been 3,409,658 cumulative confirmed cases of COVID-19 in Indonesia and 94,119 reported cumulative deaths. All cases were spread in 34 provinces in Indonesia. Among all the provinces, DKI Jakarta (Indonesian: Daerah Khusus Ibukota Jakarta and in English: Special Capital Region of Jakarta) contributed close to 24% of the cumulative confirmed cases.</p>
<h2 id="problem-statement">2. Problem Statement</h2>
<p>Given that the cumulative confirmed cases were not evenly distributed within DKI Jakarta, this geospatial analysis aim to</p>
<ul>
<li>Reveal the spatial-temporal patterns of COVID-19 case in DKI Jakarta</li>
<li>Find out sub-districts with relatively higher number of confirmed cases</li>
<li>Identify trends of COVID-19 case in the sub-districts and how they change over time.</li>
</ul>
<h2 id="data">3. Data</h2>
<p>In this analysis, the following dataset were used:</p>
<div class="layout-chunk" data-layout="l-body">
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 34%" />
<col style="width: 4%" />
<col style="width: 49%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Data</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Format</th>
<th style="text-align: left;">Source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Jakarta COVID-19 Data</td>
<td style="text-align: left;">Daily COVID-19 data of DKI Jakarta month between March 2020 to July 2021</td>
<td style="text-align: left;">XLSX</td>
<td style="text-align: left;"><a href="https://riwayat-file-covid-19-dki-jakarta-jakartagis.hub.arcgis.com/">Open Data Covid-19 Provinsi DKI</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">DKI Jarkata shapefile</td>
<td style="text-align: left;">Jakarta sub-district</td>
<td style="text-align: left;">Shapefile</td>
<td style="text-align: left;"><a href="https://www.indonesia-geospasial.com/p/sitemap.html">Indonesia Geospatial Data</a></td>
</tr>
</tbody>
</table>
</div>
<h2 id="getting-started">4. Getting Started</h2>
<p>In this exercise, the key R package use is tmap package in R. Beside tmap package, three other R packages will be used. They are:</p>
<ul>
<li>ReadXL for importing XLSX file,</li>
<li>tidyr for tidying data,</li>
<li>sf for handling geospatial data,</li>
<li>plotly for visualization</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>packages</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'sf'</span>,<span class='st'>'tidyverse'</span>,<span class='st'>'readxl'</span>,<span class='st'>'plotly'</span>,<span class='st'>'tmap'</span>,<span class='st'>'dplyr'</span>,<span class='st'>'lubridate'</span>,<span class='st'>'plyr'</span><span class='op'>)</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<h2 id="data-import">5.Data Import</h2>
<h3 id="importing-geospatial-data-into-r">5.1 Importing Geospatial Data Into R</h3>
<p>Import the data and examine the content of the data set.</p>
<p>-Data will first be imported as an sf object to facilitate data pre-processing and initial analysis, then converted to sp class in the later part of the analysis.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>DKI_Jakarta_Temp</span> <span class='op'>=</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn<span class='op'>=</span><span class='st'>"data/geospatial"</span>,layer<span class='op'>=</span><span class='st'>"BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Reading layer `BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA&#39; from data source `C:\Users\User\Desktop\IS415\lye-jia-wei\IS415_blog\_posts\2021-08-30-take-home-exercise-1\data\geospatial&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 269 features and 161 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 106.3831 ymin: -6.370815 xmax: 106.9728 ymax: -5.184322
Geodetic CRS:  WGS 84</code></pre>
</div>
<p>The message above reveals that the geospatial objects are multipolygon features. There are a total of 269 multipolygon features and 161 fields in DKI simple feature data frame. DKI is in WGS84 projected coordinates systems.</p>
<p>###5.2 Importing Attribute Data Into R</p>
<p>Next, we will import monthly Covid-19 data XLSX file from a folder into RStudio and save it into an R dataframe called Temp_Covid_DF.</p>
<h4 id="reading-xlsx-file">5.2.1 Reading XLSX File</h4>
<p>The task will be performed by using read_xlsx() function as shown in the code chunk below. We will also be adding another ‘Date’ field for extraction later.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>File_List</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span><span class='op'>(</span>path <span class='op'>=</span> <span class='st'>"C:/Users/User/Desktop/IS415/lye-jia-wei/IS415_blog/_posts/2021-08-30-take-home-exercise-1/data/aspatial"</span> , pattern <span class='op'>=</span> <span class='st'>"*.xlsx"</span>,  full.names <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='va'>DF_List</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_along</a></span><span class='op'>(</span><span class='va'>File_List</span><span class='op'>)</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/transform.html'>transform</a></span><span class='op'>(</span><span class='fu'>read_xlsx</span><span class='op'>(</span><span class='va'>File_List</span><span class='op'>[</span><span class='va'>x</span><span class='op'>]</span><span class='op'>)</span>, Date <span class='op'>=</span> <span class='va'>File_List</span><span class='op'>[</span><span class='va'>x</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="creating-dataframe">5.2.2 Creating Dataframe</h4>
<p>We will then convert the DF_List into dataframe using the ldpy function. This will be a temporary dataframe which we will carry out data cleaning in the later step.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Temp_Covid_DF</span> <span class='op'>&lt;-</span> <span class='fu'>ldply</span><span class='op'>(</span><span class='va'>DF_List</span>, <span class='va'>data.frame</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="data-extraction-wrangling-and-integration">6.Data Extraction, Wrangling and Integration</h2>
<h3 id="geospatial-data">6.1 Geospatial Data</h3>
<h4 id="data-cleaning">6.1.1 Data Cleaning</h4>
<p>Ensure that spatial data to be used for analysis has no invalid geometries.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='fu'>st_is_valid</span><span class='op'>(</span><span class='va'>DKI_Jakarta_Temp</span><span class='op'>)</span> <span class='op'>==</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 0</code></pre>
</div>
<ul>
<li>There are no invalid geometries in the data that needs to be handled.</li>
</ul>
<p>Check the data for missing values, as missing values can impact future calculations.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>DKI_Jakarta_Temp</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>rowSums</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>DKI_Jakarta_Temp</span><span class='op'>)</span><span class='op'>)</span><span class='op'>!=</span><span class='fl'>0</span>,<span class='op'>]</span>
</code></pre>
</div>
<pre><code>Simple feature collection with 2 features and 161 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 106.8412 ymin: -6.154036 xmax: 106.8612 ymax: -6.144973
Geodetic CRS:  WGS 84
    OBJECT_ID KODE_DESA             DESA   KODE    PROVINSI KAB_KOTA
243     25645  31888888     DANAU SUNTER 318888 DKI JAKARTA     &lt;NA&gt;
244     25646  31888888 DANAU SUNTER DLL 318888 DKI JAKARTA     &lt;NA&gt;
    KECAMATAN DESA_KELUR JUMLAH_PEN JUMLAH_KK LUAS_WILAY KEPADATAN
243      &lt;NA&gt;       &lt;NA&gt;          0         0          0         0
244      &lt;NA&gt;       &lt;NA&gt;          0         0          0         0
    PERPINDAHA JUMLAH_MEN PERUBAHAN WAJIB_KTP SILAM KRISTEN KHATOLIK
243          0          0         0         0     0       0        0
244          0          0         0         0     0       0        0
    HINDU BUDHA KONGHUCU KEPERCAYAA PRIA WANITA BELUM_KAWI KAWIN
243     0     0        0          0    0      0          0     0
244     0     0        0          0    0      0          0     0
    CERAI_HIDU CERAI_MATI U0 U5 U10 U15 U20 U25 U30 U35 U40 U45 U50
243          0          0  0  0   0   0   0   0   0   0   0   0   0
244          0          0  0  0   0   0   0   0   0   0   0   0   0
    U55 U60 U65 U70 U75 TIDAK_BELU BELUM_TAMA TAMAT_SD SLTP SLTA
243   0   0   0   0   0          0          0        0    0    0
244   0   0   0   0   0          0          0        0    0    0
    DIPLOMA_I DIPLOMA_II DIPLOMA_IV STRATA_II STRATA_III BELUM_TIDA
243         0          0          0         0          0          0
244         0          0          0         0          0          0
    APARATUR_P TENAGA_PEN WIRASWASTA PERTANIAN NELAYAN AGAMA_DAN
243          0          0          0         0       0         0
244          0          0          0         0       0         0
    PELAJAR_MA TENAGA_KES PENSIUNAN LAINNYA GENERATED KODE_DES_1
243          0          0         0       0      &lt;NA&gt;       &lt;NA&gt;
244          0          0         0       0      &lt;NA&gt;       &lt;NA&gt;
    BELUM_ MENGUR_ PELAJAR_ PENSIUNA_1 PEGAWAI_ TENTARA KEPOLISIAN
243      0       0        0          0        0       0          0
244      0       0        0          0        0       0          0
    PERDAG_ PETANI PETERN_ NELAYAN_1 INDUSTR_ KONSTR_ TRANSP_ KARYAW_
243       0      0       0         0        0       0       0       0
244       0      0       0         0        0       0       0       0
    KARYAW1 KARYAW1_1 KARYAW1_12 BURUH BURUH_ BURUH1 BURUH1_1
243       0         0          0     0      0      0        0
244       0         0          0     0      0      0        0
    PEMBANT_ TUKANG TUKANG_1 TUKANG_12 TUKANG__13 TUKANG__14
243        0      0        0         0          0          0
244        0      0        0         0          0          0
    TUKANG__15 TUKANG__16 TUKANG__17 PENATA PENATA_ PENATA1_1 MEKANIK
243          0          0          0      0       0         0       0
244          0          0          0      0       0         0       0
    SENIMAN_ TABIB PARAJI_ PERANCA_ PENTER_ IMAM_M PENDETA PASTOR
243        0     0       0        0       0      0       0      0
244        0     0       0        0       0      0       0      0
    WARTAWAN USTADZ JURU_M PROMOT ANGGOTA_ ANGGOTA1 ANGGOTA1_1
243        0      0      0      0        0        0          0
244        0      0      0      0        0        0          0
    PRESIDEN WAKIL_PRES ANGGOTA1_2 ANGGOTA1_3 DUTA_B GUBERNUR
243        0          0          0          0      0        0
244        0          0          0          0      0        0
    WAKIL_GUBE BUPATI WAKIL_BUPA WALIKOTA WAKIL_WALI ANGGOTA1_4
243          0      0          0        0          0          0
244          0      0          0        0          0          0
    ANGGOTA1_5 DOSEN GURU PILOT PENGACARA_ NOTARIS ARSITEK AKUNTA_
243          0     0    0     0          0       0       0       0
244          0     0    0     0          0       0       0       0
    KONSUL_ DOKTER BIDAN PERAWAT APOTEK_ PSIKIATER PENYIA_ PENYIA1
243       0      0     0       0       0         0       0       0
244       0      0     0       0       0         0       0       0
    PELAUT PENELITI SOPIR PIALAN PARANORMAL PEDAGA_ PERANG_ KEPALA_
243      0        0     0      0          0       0       0       0
244      0        0     0      0          0       0       0       0
    BIARAW_ WIRASWAST_ LAINNYA_12 LUAS_DESA KODE_DES_3 DESA_KEL_1
243       0          0          0         0       &lt;NA&gt;       &lt;NA&gt;
244       0          0          0         0       &lt;NA&gt;       &lt;NA&gt;
    KODE_12                       geometry
243       0 MULTIPOLYGON (((106.8612 -6...
244       0 MULTIPOLYGON (((106.8504 -6...</code></pre>
</div>
<h4 id="plotting-the-geospatial-data">6.1.2 Plotting the Geospatial Data</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>DKI_Jakarta_Temp</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-8-1.png" width="624" /></p>
</div>
<p>From the map, it is evident that the dataframe consists of outer islands.</p>
<h4 id="removing-outer-islands">6.1.3 Removing Outer Islands</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>DKI_Jakarta_Temp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>DKI_Jakarta_Temp</span>, <span class='va'>OBJECT_ID</span> <span class='op'>&gt;</span> <span class='fl'>25383</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Through exploratory data analysis, it is evident that the mainland is all the features where ‘KAB_KOTA’ is not ’KEPULAUAN SERIBU.</p>
<h4 id="retain-the-first-nine-fields-in-the-dki-jakarta-sf-data-frame">6.1.4 Retain the first nine fields in the DKI Jakarta sf data frame</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Positions</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span>
<span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='va'>DKI_Jakarta_Temp</span> <span class='op'>%&gt;%</span> <span class='fu'>select</span><span class='op'>(</span><span class='va'>Positions</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="define-projection">6.1.5 Define Projection</h4>
<p>-The spatial data of Jakarta is utilised in this analysis. -Initial data exploration reveals that data is to be projected using the LCC projection, with the World Geodetic System 1984 datum. The corresponding EPSG code is EPSG:23845. The CRS of the data will be checked, then assigned accordingly. Unit of measurement will be in metres.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>DKI_Jakarta</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Coordinate Reference System:
  User input: WGS 84 
  wkt:
GEOGCRS[&quot;WGS 84&quot;,
    DATUM[&quot;World Geodetic System 1984&quot;,
        ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
            LENGTHUNIT[&quot;metre&quot;,1]]],
    PRIMEM[&quot;Greenwich&quot;,0,
        ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS[&quot;latitude&quot;,north,
            ORDER[1],
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
        AXIS[&quot;longitude&quot;,east,
            ORDER[2],
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
    ID[&quot;EPSG&quot;,4326]]</code></pre>
</div>
<h4 id="assigning-a-coordinate-system">6.1.6 Assigning a coordinate system</h4>
<p>Although DKI_Jakarta data frame is projected in WGS84 but when we read until the end of the print, it indicates that the EPSG is 4326. This is a wrong EPSG code because the correct EPSG code should be 23845.</p>
<p>In order to assign the correct EPSG code to DKI_Jakarta data frame as well as to set the projection coordinate system, st_transform is used as shown in the code chunk below.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='fu'>st_transform</span><span class='op'>(</span><span class='va'>DKI_Jakarta</span>, <span class='fl'>23845</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Check the CSR again by using the code chunk below.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>DKI_Jakarta</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Coordinate Reference System:
  User input: EPSG:23845 
  wkt:
PROJCRS[&quot;DGN95 / Indonesia TM-3 zone 54.1&quot;,
    BASEGEOGCRS[&quot;DGN95&quot;,
        DATUM[&quot;Datum Geodesi Nasional 1995&quot;,
            ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
                LENGTHUNIT[&quot;metre&quot;,1]]],
        PRIMEM[&quot;Greenwich&quot;,0,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
        ID[&quot;EPSG&quot;,4755]],
    CONVERSION[&quot;Indonesia TM-3 zone 54.1&quot;,
        METHOD[&quot;Transverse Mercator&quot;,
            ID[&quot;EPSG&quot;,9807]],
        PARAMETER[&quot;Latitude of natural origin&quot;,0,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8801]],
        PARAMETER[&quot;Longitude of natural origin&quot;,139.5,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8802]],
        PARAMETER[&quot;Scale factor at natural origin&quot;,0.9999,
            SCALEUNIT[&quot;unity&quot;,1],
            ID[&quot;EPSG&quot;,8805]],
        PARAMETER[&quot;False easting&quot;,200000,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8806]],
        PARAMETER[&quot;False northing&quot;,1500000,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8807]]],
    CS[Cartesian,2],
        AXIS[&quot;easting (X)&quot;,east,
            ORDER[1],
            LENGTHUNIT[&quot;metre&quot;,1]],
        AXIS[&quot;northing (Y)&quot;,north,
            ORDER[2],
            LENGTHUNIT[&quot;metre&quot;,1]],
    USAGE[
        SCOPE[&quot;Cadastre.&quot;],
        AREA[&quot;Indonesia - onshore east of 138Â°E.&quot;],
        BBOX[-9.19,138,-1.49,141.01]],
    ID[&quot;EPSG&quot;,23845]]</code></pre>
</div>
<h4 id="na-geometric-validity-checks-and-correction">6.1.7 NA, Geometric Validity Checks and Correction</h4>
<p>To check if there are any NA values as a result of data manipulation.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>DKI_Jakarta</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>rowSums</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>DKI_Jakarta</span><span class='op'>)</span><span class='op'>)</span><span class='op'>!=</span><span class='fl'>0</span>,<span class='op'>]</span>
</code></pre>
</div>
<pre><code>Simple feature collection with 2 features and 9 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -3623599 ymin: 691982.5 xmax: -3620985 ymax: 693163.1
Projected CRS: DGN95 / Indonesia TM-3 zone 54.1
    OBJECT_ID KODE_DESA             DESA   KODE    PROVINSI KAB_KOTA
237     25645  31888888     DANAU SUNTER 318888 DKI JAKARTA     &lt;NA&gt;
238     25646  31888888 DANAU SUNTER DLL 318888 DKI JAKARTA     &lt;NA&gt;
    KECAMATAN DESA_KELUR JUMLAH_PEN                       geometry
237      &lt;NA&gt;       &lt;NA&gt;          0 MULTIPOLYGON (((-3620985 69...
238      &lt;NA&gt;       &lt;NA&gt;          0 MULTIPOLYGON (((-3622382 69...</code></pre>
</div>
<p>There are 2 NA values detected. A quick look indicates that it has no sub_district, district and population information. Hence, we will proceed to drop the rows.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span><span class='op'>(</span><span class='va'>DKI_Jakarta</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"DESA_KELUR"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Additionally we will also conduct a geometry check to ensure that the data is not corrupted or invalid when imported into R. The following code chunk does this check</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Test</span> <span class='op'>&lt;-</span> <span class='fu'>st_is_valid</span><span class='op'>(</span><span class='va'>DKI_Jakarta</span>,reason<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>Test</span><span class='op'>!=</span> <span class='st'>"Valid Geometry"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 0</code></pre>
</div>
<p>There are no invalid geometries.</p>
<h3 id="aspatial-data">6.2 Aspatial Data</h3>
<h4 id="understanding-temp_covid_df">6.2.1 Understanding Temp_Covid_DF</h4>
<p>To better understand the data structure of Temp_Covid_DF, we will inspect it quickly.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>Temp_Covid_DF</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>      ID_KEL Nama_provinsi     nama_kota nama_kecamatan
1       &lt;NA&gt;          &lt;NA&gt;          &lt;NA&gt;           &lt;NA&gt;
2 3172051003   DKI JAKARTA JAKARTA UTARA     PADEMANGAN
3 3173041007   DKI JAKARTA JAKARTA BARAT        TAMBORA
4 3175041005   DKI JAKARTA JAKARTA TIMUR    KRAMAT JATI
5 3175031003   DKI JAKARTA JAKARTA TIMUR     JATINEGARA
6 3175101006   DKI JAKARTA JAKARTA TIMUR       CIPAYUNG
  nama_kelurahan SUSPEK Perawatan.RS...7 Isolasi.di.Rumah...8
1          TOTAL 717950              197                28717
2          ANCOL    N/A              N/A                  N/A
3          ANGKE    N/A              N/A                  N/A
4   BALE KAMBANG    N/A              N/A                  N/A
5    BALI MESTER    N/A              N/A                  N/A
6     BAMBU APUS    N/A              N/A                  N/A
  Suspek.Meninggal Selesai.Isolasi...10 PROBABLE Perawatan.RS...12
1             2311               686725     7476                95
2              N/A                  N/A      N/A               N/A
3              N/A                  N/A      N/A               N/A
4              N/A                  N/A      N/A               N/A
5              N/A                  N/A      N/A               N/A
6              N/A                  N/A      N/A               N/A
  Isolasi.di.Rumah...13 Probable.Meninggal Selesai.Isolasi...15
1                     0               5333                 2048
2                   N/A                N/A                  N/A
3                   N/A                N/A                  N/A
4                   N/A                N/A                  N/A
5                   N/A                N/A                  N/A
6                   N/A                N/A                  N/A
  PELAKU.PERJALANAN Perawatan.RS...17 Isolasi.di.Rumah...18
1              4452                 0                     3
2               N/A               N/A                   N/A
3               N/A               N/A                   N/A
4               N/A               N/A                   N/A
5               N/A               N/A                   N/A
6               N/A               N/A                   N/A
  Selesai.Isolasi...19 KONTAK.ERAT Perawatan.RS...21
1                 4449      886591                 0
2                  N/A         N/A               N/A
3                  N/A         N/A               N/A
4                  N/A         N/A               N/A
5                  N/A         N/A               N/A
6                  N/A         N/A               N/A
  Isolasi.di.Rumah...22 Selesai.Isolasi...23 DISCARDED
1                 44028               842563     17463
2                   N/A                  N/A       N/A
3                   N/A                  N/A       N/A
4                   N/A                  N/A       N/A
5                   N/A                  N/A       N/A
6                   N/A                  N/A       N/A
  Isolasi.di.Rumah...25 Meninggal...26 Selesai.Isolasi...27 POSITIF
1                     0              1                17462  339735
2                   N/A            N/A                  N/A     834
3                   N/A            N/A                  N/A     617
4                   N/A            N/A                  N/A     755
5                   N/A            N/A                  N/A     358
6                   N/A            N/A                  N/A     870
  Dirawat Sembuh Meninggal...31 Self.Isolation Keterangan
1    4425 323892           5478           5940         NA
2       8    808              9              9         NA
3      23    572              8             14         NA
4       8    698             15             34         NA
5       4    344              8              2         NA
6      19    816             13             22         NA
                                                                                                                                                                       Date
1 C:/Users/User/Desktop/IS415/lye-jia-wei/IS415_blog/_posts/2021-08-30-take-home-exercise-1/data/aspatial/Standar Kelurahan Data Corona (28 Februari 2021 Pukul 10.00).xlsx
2 C:/Users/User/Desktop/IS415/lye-jia-wei/IS415_blog/_posts/2021-08-30-take-home-exercise-1/data/aspatial/Standar Kelurahan Data Corona (28 Februari 2021 Pukul 10.00).xlsx
3 C:/Users/User/Desktop/IS415/lye-jia-wei/IS415_blog/_posts/2021-08-30-take-home-exercise-1/data/aspatial/Standar Kelurahan Data Corona (28 Februari 2021 Pukul 10.00).xlsx
4 C:/Users/User/Desktop/IS415/lye-jia-wei/IS415_blog/_posts/2021-08-30-take-home-exercise-1/data/aspatial/Standar Kelurahan Data Corona (28 Februari 2021 Pukul 10.00).xlsx
5 C:/Users/User/Desktop/IS415/lye-jia-wei/IS415_blog/_posts/2021-08-30-take-home-exercise-1/data/aspatial/Standar Kelurahan Data Corona (28 Februari 2021 Pukul 10.00).xlsx
6 C:/Users/User/Desktop/IS415/lye-jia-wei/IS415_blog/_posts/2021-08-30-take-home-exercise-1/data/aspatial/Standar Kelurahan Data Corona (28 Februari 2021 Pukul 10.00).xlsx
  ID_KEL...1 ID_KEL...2 ODP Proses.Pemantauan Selesai.Pemantauan PDP
1       &lt;NA&gt;       &lt;NA&gt;  NA                NA                 NA  NA
2       &lt;NA&gt;       &lt;NA&gt;  NA                NA                 NA  NA
3       &lt;NA&gt;       &lt;NA&gt;  NA                NA                 NA  NA
4       &lt;NA&gt;       &lt;NA&gt;  NA                NA                 NA  NA
5       &lt;NA&gt;       &lt;NA&gt;  NA                NA                 NA  NA
6       &lt;NA&gt;       &lt;NA&gt;  NA                NA                 NA  NA
  Masih.Dirawat Pulang.dan.Sehat Meninggal ODP.Meninggal
1            NA               NA        NA            NA
2            NA               NA        NA            NA
3            NA               NA        NA            NA
4            NA               NA        NA            NA
5            NA               NA        NA            NA
6            NA               NA        NA            NA
  PDP.Meninggal Isolasi.di.Rumah...21 Selesai.Isolasi...22
1            NA                  &lt;NA&gt;                 &lt;NA&gt;
2            NA                  &lt;NA&gt;                 &lt;NA&gt;
3            NA                  &lt;NA&gt;                 &lt;NA&gt;
4            NA                  &lt;NA&gt;                 &lt;NA&gt;
5            NA                  &lt;NA&gt;                 &lt;NA&gt;
6            NA                  &lt;NA&gt;                 &lt;NA&gt;
  Isolasi.di.Rumah...24 Meninggal...25 Selesai.Isolasi...26
1                  &lt;NA&gt;           &lt;NA&gt;                 &lt;NA&gt;
2                  &lt;NA&gt;           &lt;NA&gt;                 &lt;NA&gt;
3                  &lt;NA&gt;           &lt;NA&gt;                 &lt;NA&gt;
4                  &lt;NA&gt;           &lt;NA&gt;                 &lt;NA&gt;
5                  &lt;NA&gt;           &lt;NA&gt;                 &lt;NA&gt;
6                  &lt;NA&gt;           &lt;NA&gt;                 &lt;NA&gt;
  Meninggal...30 Meninggal...24 Selesai.Isolasi...25 Meninggal...29
1             NA             NA                   NA             NA
2             NA             NA                   NA             NA
3             NA             NA                   NA             NA
4             NA             NA                   NA             NA
5             NA             NA                   NA             NA
6             NA             NA                   NA             NA
  Isolasi.di.Rumah...17 Selesai.Isolasi...18 Isolasi.di.Rumah...20
1                    NA                   NA                    NA
2                    NA                   NA                    NA
3                    NA                   NA                    NA
4                    NA                   NA                    NA
5                    NA                   NA                    NA
6                    NA                   NA                    NA
  Selesai.Isolasi...21 Meninggal...23 Selesai.Isolasi...24
1                   NA             NA                   NA
2                   NA             NA                   NA
3                   NA             NA                   NA
4                   NA             NA                   NA
5                   NA             NA                   NA
6                   NA             NA                   NA
  Meninggal...28 Perawatan.RS Selesai.Isolasi...13
1             NA           NA                   NA
2             NA           NA                   NA
3             NA           NA                   NA
4             NA           NA                   NA
5             NA           NA                   NA
6             NA           NA                   NA
  Isolasi.di.Rumah...15 Selesai.Isolasi...16 Meninggal...21
1                    NA                   NA             NA
2                    NA                   NA             NA
3                    NA                   NA             NA
4                    NA                   NA             NA
5                    NA                   NA             NA
6                    NA                   NA             NA</code></pre>
</div>
<p>While combining the different XLSX file into the dataframe, it resulted in duplicated columns. Hence, the next step is to remove these duplicated columns as well as other irrelevant columns.</p>
<h4 id="coalesce-id_kel-meninngal-column">6.2.2 Coalesce ‘ID_KEL’ &amp; ‘Meninngal’ column</h4>
<p>A quick glance at dataframe suggest that there are duplicated ‘ID_KEL’ column. Hence, coalesce needs to be done to ensure that all the ID are present one single ID column.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Temp_Covid_DF</span> <span class='op'>&lt;-</span> <span class='va'>Temp_Covid_DF</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>ID_KEL <span class='op'>=</span> <span class='fu'>coalesce</span><span class='op'>(</span><span class='va'>ID_KEL</span>, <span class='va'>ID_KEL...1</span>, <span class='va'>ID_KEL...2</span><span class='op'>)</span><span class='op'>)</span>


<span class='co'>#Temp_Covid_DF &lt;- Temp_Covid_DF %&gt;% mutate(ID = coalesce(ID_KEL...1, ID_KEL))</span>
<span class='co'>#Temp_Covid_DFf$Meninggal...26 = as.double($Meninggal...26)</span>

<span class='co'>#Temp_Covid_DF &lt;- Temp_Covid_DF %&gt;% mutate(Meninggal = coalesce(Meninggal, Meninggal...28, Meninggal...29, Meninggal...30, Meninggal...31, Meninggal...26))</span>
</code></pre>
</div>
</div>
<p>We will then repeat this step for the ‘Meninngal’ column. Before we coalesce the various Meninggal column, we will have to change the data type of the column.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Temp_Covid_DF</span><span class='op'>$</span><span class='va'>Meninggal...26</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/double.html'>as.double</a></span><span class='op'>(</span><span class='va'>Temp_Covid_DF</span><span class='op'>$</span><span class='va'>Meninggal...26</span><span class='op'>)</span>


<span class='va'>Temp_Covid_DF</span> <span class='op'>&lt;-</span> <span class='va'>Temp_Covid_DF</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>Meninggal <span class='op'>=</span> <span class='fu'>coalesce</span><span class='op'>(</span><span class='va'>Meninggal</span>, <span class='va'>Meninggal...28</span>, <span class='va'>Meninggal...29</span>, <span class='va'>Meninggal...30</span>, <span class='va'>Meninggal...31</span>, <span class='va'>Meninggal...26</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="extract-column-of-interest">6.2.3 Extract Column of Interest</h4>
<p>While there are many columns in Temp_Covid_DF, the relevant columns for analysis are:</p>
<ul>
<li>Name_provinsi (Province)</li>
<li>name_kota (City)</li>
<li>nama_kecamatan (District)</li>
<li>nama_kelurahan (Sub-district)</li>
<li>Meninggal (Deaths)</li>
<li>POSITIF (Covid Cases)</li>
<li>month</li>
<li>ID</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Temp_Covid_DF</span> <span class='op'>&lt;-</span> <span class='va'>Temp_Covid_DF</span> <span class='op'>%&gt;%</span> <span class='fu'>select</span><span class='op'>(</span><span class='st'>"Date"</span>,<span class='st'>"ID_KEL"</span>, 
                                          <span class='st'>"Nama_provinsi"</span>, <span class='st'>"nama_kota"</span>, 
                                          <span class='st'>"nama_kecamatan"</span>, <span class='st'>"nama_kelurahan"</span>, 
                                          <span class='st'>"POSITIF"</span>, <span class='st'>"Meninggal"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="adding-in-date-column">6.2.4 Adding in ‘Date’ Column</h4>
<p>Since the focus of this analysis will require the time period of the cases, we will add a ‘Date’ column.</p>
<p>A quick look at the XLSX file suggest that:</p>
<p>XLSX File Name: Standar Kelurahan Data Corona (28 Februari 2021 Pukul 10.00).xlsx</p>
<p>The date is formatted as DD-Month-YYY in bracket right before ( and the word ‘Pukul’. Hence, we will use regular expressions to extract the date.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Temp_Covid_DF</span><span class='op'>$</span><span class='va'>Date</span> <span class='op'>&lt;-</span> <span class='fu'>str_extract</span><span class='op'>(</span><span class='va'>Temp_Covid_DF</span><span class='op'>$</span><span class='va'>Date</span>,<span class='st'>"(?&lt;=Data Corona \\().*(?= Pukul)"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>By looking through Temp_Covid_DF, we can see that the month is spelled in Bahasa Indonesia which is the national adminstrative language of Indonesia. With that, we have to set locale to Indonesia and format the date.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/locales.html'>Sys.setlocale</a></span><span class='op'>(</span>locale<span class='op'>=</span><span class='st'>"ind"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;LC_COLLATE=Indonesian_Indonesia.1252;LC_CTYPE=Indonesian_Indonesia.1252;LC_MONETARY=Indonesian_Indonesia.1252;LC_NUMERIC=C;LC_TIME=Indonesian_Indonesia.1252&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Temp_Covid_DF</span><span class='op'>$</span><span class='va'>Date</span>  <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>Temp_Covid_DF</span><span class='op'>$</span><span class='va'>Date</span> <span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='va'>Temp_Covid_DF</span><span class='op'>$</span><span class='va'>Date</span> , format <span class='op'>=</span><span class='st'>"%d %B %Y"</span><span class='op'>)</span>
<span class='co'>#Temp_Covid_DF$Date  &lt;- Temp_Covid_DF$Date [order(Temp_Covid_DF$Date$Date),]</span>
</code></pre>
</div>
</div>
<h4 id="renaming-column">6.2.5 Renaming Column</h4>
<p>Translating column name to English for ease of comprehension Changing column name for Temp_Covid_DF</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Temp_Covid_DF</span> <span class='op'>&lt;-</span> <span class='va'>Temp_Covid_DF</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span>
    Death<span class='op'>=</span><span class='va'>Meninggal</span>, Cases<span class='op'>=</span><span class='va'>POSITIF</span>, Sub_District<span class='op'>=</span><span class='va'>nama_kelurahan</span>, 
    District<span class='op'>=</span><span class='va'>nama_kecamatan</span>, City<span class='op'>=</span><span class='va'>nama_kota</span>, Province<span class='op'>=</span><span class='va'>Nama_provinsi</span>, ID<span class='op'>=</span><span class='va'>ID_KEL</span>
  <span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Changing column name for DKI_Jakarta</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='va'>DKI_Jakarta</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span>
    Geometry<span class='op'>=</span><span class='va'>geometry</span>,
    Total_Population<span class='op'>=</span><span class='va'>JUMLAH_PEN</span>, Sub_District<span class='op'>=</span><span class='va'>DESA_KELUR</span>, District<span class='op'>=</span><span class='va'>KECAMATAN</span>, 
    City<span class='op'>=</span><span class='va'>KAB_KOTA</span>, Province<span class='op'>=</span><span class='va'>PROVINSI</span>, Village<span class='op'>=</span><span class='va'>DESA</span>, ID<span class='op'>=</span><span class='va'>KODE</span>,
    Village_Code<span class='op'>=</span><span class='va'>KODE_DESA</span>, Object_ID<span class='op'>=</span><span class='va'>OBJECT_ID</span>
    <span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="dropping-columns">6.2.5 Dropping Columns</h4>
<p>Dropping ‘ID’ column with ‘NA’ and ID column with data other than ID</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Covid_DF</span> <span class='op'>&lt;-</span><span class='va'>Temp_Covid_DF</span><span class='op'>[</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>Temp_Covid_DF</span><span class='op'>$</span><span class='va'>ID</span><span class='op'>)</span>,<span class='op'>]</span>

<span class='co'>#Covid_DF  &lt;- Temp_Covid_DF [rowSums(is.na(Temp_Covid_DF [,1]))!=1,]</span>
<span class='co'>#Covid_DF &lt;-Temp_Covid_DF [!(Temp_Covid_DF$ID=="BELUM DIKETAHUI" | Temp_Covid_DF$ID=="PROSES UPDATE DATA" | Temp_Covid_DF$ID=="LUAR DKI JAKARTA") ,]</span>
</code></pre>
</div>
</div>
<h4 id="changing-data-type-of-column">6.2.5 Changing Data Type of Column</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#Changing Cases data type from character to numeric</span>

<span class='va'>Covid_DF</span><span class='op'>$</span><span class='va'>Cases</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>Covid_DF</span><span class='op'>$</span><span class='va'>Cases</span><span class='op'>)</span>




<span class='va'>Covid_DF</span><span class='op'>$</span><span class='va'>Death</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>Covid_DF</span><span class='op'>$</span><span class='va'>Death</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>=</span> <span class='fl'>0</span>

<span class='va'>Covid_DF</span><span class='op'>$</span><span class='va'>Death</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>Covid_DF</span><span class='op'>$</span><span class='va'>Death</span><span class='op'>)</span>



<span class='va'>DKI_Jakarta</span><span class='op'>$</span><span class='va'>Total_Population</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>DKI_Jakarta</span><span class='op'>$</span><span class='va'>Total_Population</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="joining-the-attribute-data-spatial-data">7. Joining the Attribute Data &amp; Spatial Data</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Jakarta_Covid</span> <span class='op'>&lt;-</span> <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>DKI_Jakarta</span>, <span class='va'>Covid_DF</span>,
                          by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Province"</span> <span class='op'>=</span> <span class='st'>"Province"</span>,<span class='st'>"Sub_District"</span> <span class='op'>=</span> <span class='st'>"Sub_District"</span>,<span class='st'>'City'</span><span class='op'>=</span><span class='st'>'City'</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="preliminary-choropleth-mapping">8. Preliminary Choropleth Mapping</h2>
<p>To better understand the Jakarta_Covid dataframe, tmap is used to plot Choropleth map to quickly visualize spatial relation of Covid-19 cases and deaths in Jakarta respectively.</p>
<h3 id="preliminary-choropleth-map-of-covid-19-cases-in-jakarta">8.1 Preliminary Choropleth Map of Covid-19 Cases in Jakarta</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>Jakarta_Covid</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_fill</span><span class='op'>(</span><span class='st'>"Cases"</span>,minimize <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-28-1.png" width="624" /></p>
</div>
<h3 id="preliminnary-choropleth-map-of-covid-19-death-in-jakarta">8.2 Preliminnary Choropleth Map of Covid-19 Death in Jakarta</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>Jakarta_Covid</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_fill</span><span class='op'>(</span><span class='st'>"Death"</span>,minimize <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-29-1.png" width="624" /></p>
</div>
<p>From the two maps, it is evident that there are missing geospatial data. Hence, in the following segment, data cleaning and inspection needs to be executed.</p>
<h2 id="data-inspection-data-cleaning-round-2">9. Data Inspection &amp; Data Cleaning Round 2</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#View(Jakarta_Covid)</span>
<span class='co'>#View(DKI_Jakarta)</span>
<span class='co'>#View(Covid_DF)</span>
</code></pre>
</div>
</div>
<p>After inspecting the Jakarta_Covid dataframe, it appears that there are spelling error for data in the ‘Sub-District’ column e.g ‘KRAMAJATI’ vs ‘KRAMAT JATI’ which resulted in missing data when joining the attribute &amp; spatial data.</p>
<h3 id="identifying-missing-sub-district">9.1 Identifying Missing Sub-District</h3>
<p>The following code chunk will identify the missing ‘sub-district’ values.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Covid_SD</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>Covid_DF</span><span class='op'>$</span><span class='va'>Sub_District</span><span class='op'>)</span>
<span class='va'>Jakarata_SD</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>DKI_Jakarta</span><span class='op'>$</span><span class='va'>Sub_District</span><span class='op'>)</span>


<span class='va'>Covid_SD</span><span class='op'>[</span><span class='op'>!</span><span class='op'>(</span><span class='va'>Covid_SD</span> <span class='op'>%in%</span> <span class='va'>Jakarata_SD</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>  [1] &quot;BALE KAMBANG&quot;          &quot;HALIM PERDANA KUSUMAH&quot;
  [3] &quot;JATI PULO&quot;             &quot;KALI BARU&quot;            
  [5] &quot;KAMPUNG TENGAH&quot;        &quot;KERENDANG&quot;            
  [7] &quot;KRAMAT JATI&quot;           &quot;LUAR DKI JAKARTA&quot;     
  [9] &quot;PAL MERIAM&quot;            &quot;PINANG RANTI&quot;         
 [11] &quot;PROSES UPDATE DATA&quot;    &quot;PULAU HARAPAN&quot;        
 [13] &quot;PULAU KELAPA&quot;          &quot;PULAU PANGGANG&quot;       
 [15] &quot;PULAU PARI&quot;            &quot;PULAU TIDUNG&quot;         
 [17] &quot;PULAU UNTUNG JAWA&quot;     &quot;RAWA JATI&quot;            
 [19] &quot;BELUM DIKETAHUI&quot;       &quot;LUAR DKI JAKARTA&quot;     
 [21] &quot;HALIM PERDANA KUSUMAH&quot; &quot;JATI PULO&quot;            
 [23] &quot;KRAMAT JATI&quot;           &quot;PINANG RANTI&quot;         
 [25] &quot;BALE KAMBANG&quot;          &quot;KALI BARU&quot;            
 [27] &quot;RAWA JATI&quot;             &quot;KAMPUNG TENGAH&quot;       
 [29] &quot;KERENDANG&quot;             &quot;PAL MERIAM&quot;           
 [31] &quot;PULAU HARAPAN&quot;         &quot;PULAU KELAPA&quot;         
 [33] &quot;PULAU PANGGANG&quot;        &quot;PULAU PARI&quot;           
 [35] &quot;PULAU TIDUNG&quot;          &quot;PULAU UNTUNG JAWA&quot;    
 [37] &quot;BALE KAMBANG&quot;          &quot;HALIM PERDANA KUSUMAH&quot;
 [39] &quot;JATI PULO&quot;             &quot;KALI BARU&quot;            
 [41] &quot;KAMPUNG TENGAH&quot;        &quot;KERENDANG&quot;            
 [43] &quot;KRAMAT JATI&quot;           &quot;LUAR DKI JAKARTA&quot;     
 [45] &quot;PAL MERIAM&quot;            &quot;PINANG RANTI&quot;         
 [47] &quot;PROSES UPDATE DATA&quot;    &quot;PULAU HARAPAN&quot;        
 [49] &quot;PULAU KELAPA&quot;          &quot;PULAU PANGGANG&quot;       
 [51] &quot;PULAU PARI&quot;            &quot;PULAU TIDUNG&quot;         
 [53] &quot;PULAU UNTUNG JAWA&quot;     &quot;RAWA JATI&quot;            
 [55] &quot;BELUM DIKETAHUI&quot;       &quot;LUAR DKI JAKARTA&quot;     
 [57] &quot;HALIM PERDANA KUSUMAH&quot; &quot;JATI PULO&quot;            
 [59] &quot;KRAMAT JATI&quot;           &quot;PINANG RANTI&quot;         
 [61] &quot;BALE KAMBANG&quot;          &quot;KALI BARU&quot;            
 [63] &quot;RAWA JATI&quot;             &quot;KAMPUNG TENGAH&quot;       
 [65] &quot;KERENDANG&quot;             &quot;PAL MERIAM&quot;           
 [67] &quot;PULAU HARAPAN&quot;         &quot;PULAU KELAPA&quot;         
 [69] &quot;PULAU PANGGANG&quot;        &quot;PULAU PARI&quot;           
 [71] &quot;PULAU TIDUNG&quot;          &quot;PULAU UNTUNG JAWA&quot;    
 [73] &quot;BALE KAMBANG&quot;          &quot;HALIM PERDANA KUSUMAH&quot;
 [75] &quot;JATI PULO&quot;             &quot;KALI BARU&quot;            
 [77] &quot;KAMPUNG TENGAH&quot;        &quot;KERENDANG&quot;            
 [79] &quot;KRAMAT JATI&quot;           &quot;LUAR DKI JAKARTA&quot;     
 [81] &quot;PAL MERIAM&quot;            &quot;PINANG RANTI&quot;         
 [83] &quot;PROSES UPDATE DATA&quot;    &quot;PULAU HARAPAN&quot;        
 [85] &quot;PULAU KELAPA&quot;          &quot;PULAU PANGGANG&quot;       
 [87] &quot;PULAU PARI&quot;            &quot;PULAU TIDUNG&quot;         
 [89] &quot;PULAU UNTUNG JAWA&quot;     &quot;RAWA JATI&quot;            
 [91] &quot;BALE KAMBANG&quot;          &quot;HALIM PERDANA KUSUMAH&quot;
 [93] &quot;JATI PULO&quot;             &quot;KALI BARU&quot;            
 [95] &quot;KAMPUNG TENGAH&quot;        &quot;KERENDANG&quot;            
 [97] &quot;KRAMAT JATI&quot;           &quot;LUAR DKI JAKARTA&quot;     
 [99] &quot;PAL MERIAM&quot;            &quot;PINANG RANTI&quot;         
[101] &quot;PROSES UPDATE DATA&quot;    &quot;PULAU HARAPAN&quot;        
[103] &quot;PULAU KELAPA&quot;          &quot;PULAU PANGGANG&quot;       
[105] &quot;PULAU PARI&quot;            &quot;PULAU TIDUNG&quot;         
[107] &quot;PULAU UNTUNG JAWA&quot;     &quot;RAWA JATI&quot;            
[109] &quot;BALE KAMBANG&quot;          &quot;HALIM PERDANA KUSUMAH&quot;
[111] &quot;JATI PULO&quot;             &quot;KALI BARU&quot;            
[113] &quot;KAMPUNG TENGAH&quot;        &quot;KERENDANG&quot;            
[115] &quot;KRAMAT JATI&quot;           &quot;LUAR DKI JAKARTA&quot;     
[117] &quot;PAL MERIAM&quot;            &quot;PINANG RANTI&quot;         
[119] &quot;PROSES UPDATE DATA&quot;    &quot;PULAU HARAPAN&quot;        
[121] &quot;PULAU KELAPA&quot;          &quot;PULAU PANGGANG&quot;       
[123] &quot;PULAU PARI&quot;            &quot;PULAU TIDUNG&quot;         
[125] &quot;PULAU UNTUNG JAWA&quot;     &quot;RAWA JATI&quot;            
[127] &quot;BALE KAMBANG&quot;          &quot;BELUM DIKETAHUI&quot;      
[129] &quot;HALIM PERDANA KUSUMAH&quot; &quot;JATI PULO&quot;            
[131] &quot;KALI BARU&quot;             &quot;KAMPUNG TENGAH&quot;       
[133] &quot;KERENDANG&quot;             &quot;KRAMAT JATI&quot;          
[135] &quot;LUAR DKI JAKARTA&quot;      &quot;PAL MERIAM&quot;           
[137] &quot;PINANG RANTI&quot;          &quot;PULAU HARAPAN&quot;        
[139] &quot;PULAU KELAPA&quot;          &quot;PULAU PANGGANG&quot;       
[141] &quot;PULAU PARI&quot;            &quot;PULAU TIDUNG&quot;         
[143] &quot;PULAU UNTUNG JAWA&quot;     &quot;RAWA JATI&quot;            
[145] &quot;BALE KAMBANG&quot;          &quot;HALIM PERDANA KUSUMAH&quot;
[147] &quot;JATI PULO&quot;             &quot;KALI BARU&quot;            
[149] &quot;KAMPUNG TENGAH&quot;        &quot;KERENDANG&quot;            
[151] &quot;KRAMAT JATI&quot;           &quot;LUAR DKI JAKARTA&quot;     
[153] &quot;PAL MERIAM&quot;            &quot;PINANG RANTI&quot;         
[155] &quot;PROSES UPDATE DATA&quot;    &quot;PULAU HARAPAN&quot;        
[157] &quot;PULAU KELAPA&quot;          &quot;PULAU PANGGANG&quot;       
[159] &quot;PULAU PARI&quot;            &quot;PULAU TIDUNG&quot;         
[161] &quot;PULAU UNTUNG JAWA&quot;     &quot;RAWA JATI&quot;            
[163] &quot;BALE KAMBANG&quot;          &quot;BELUM DIKETAHUI&quot;      
[165] &quot;HALIM PERDANA KUSUMAH&quot; &quot;JATI PULO&quot;            
[167] &quot;KALI BARU&quot;             &quot;KAMPUNG TENGAH&quot;       
[169] &quot;KERENDANG&quot;             &quot;KRAMAT JATI&quot;          
[171] &quot;LUAR DKI JAKARTA&quot;      &quot;PAL MERIAM&quot;           
[173] &quot;PINANG RANTI&quot;          &quot;PULAU HARAPAN&quot;        
[175] &quot;PULAU KELAPA&quot;          &quot;PULAU PANGGANG&quot;       
[177] &quot;PULAU PARI&quot;            &quot;PULAU TIDUNG&quot;         
[179] &quot;PULAU UNTUNG JAWA&quot;     &quot;RAWA JATI&quot;            
[181] &quot;BALE KAMBANG&quot;          &quot;HALIM PERDANA KUSUMAH&quot;
[183] &quot;JATI PULO&quot;             &quot;KALI BARU&quot;            
[185] &quot;KAMPUNG TENGAH&quot;        &quot;KERENDANG&quot;            
[187] &quot;KRAMAT JATI&quot;           &quot;LUAR DKI JAKARTA&quot;     
[189] &quot;PAL MERIAM&quot;            &quot;PINANG RANTI&quot;         
[191] &quot;PROSES UPDATE DATA&quot;    &quot;PULAU HARAPAN&quot;        
[193] &quot;PULAU KELAPA&quot;          &quot;PULAU PANGGANG&quot;       
[195] &quot;PULAU PARI&quot;            &quot;PULAU TIDUNG&quot;         
[197] &quot;PULAU UNTUNG JAWA&quot;     &quot;RAWA JATI&quot;            
[199] &quot;BELUM DIKETAHUI&quot;       &quot;LUAR DKI JAKARTA&quot;     
[201] &quot;PINANG RANTI&quot;          &quot;BALE KAMBANG&quot;         
[203] &quot;PAL MERIAM&quot;            &quot;JATI PULO&quot;            
[205] &quot;KALI BARU&quot;             &quot;RAWA JATI&quot;            
[207] &quot;KERENDANG&quot;             &quot;KAMPUNG TENGAH&quot;       
[209] &quot;KRAMAT JATI&quot;           &quot;HALIM PERDANA KUSUMAH&quot;
[211] &quot;P. HARAPAN&quot;            &quot;P. KELAPA&quot;            
[213] &quot;P. PANGGANG&quot;           &quot;P. PARI&quot;              
[215] &quot;P. TIDUNG&quot;             &quot;UNTUNG JAWA&quot;          
[217] &quot;BALE KAMBANG&quot;          &quot;HALIM PERDANA KUSUMAH&quot;
[219] &quot;JATI PULO&quot;             &quot;KALI BARU&quot;            
[221] &quot;KAMPUNG TENGAH&quot;        &quot;KERENDANG&quot;            
[223] &quot;KRAMAT JATI&quot;           &quot;LUAR DKI JAKARTA&quot;     
[225] &quot;PAL MERIAM&quot;            &quot;PINANG RANTI&quot;         
[227] &quot;PROSES UPDATE DATA&quot;    &quot;PULAU HARAPAN&quot;        
[229] &quot;PULAU KELAPA&quot;          &quot;PULAU PANGGANG&quot;       
[231] &quot;PULAU PARI&quot;            &quot;PULAU TIDUNG&quot;         
[233] &quot;PULAU UNTUNG JAWA&quot;     &quot;RAWA JATI&quot;            
[235] &quot;BELUM DIKETAHUI&quot;       &quot;LUAR DKI JAKARTA&quot;     
[237] &quot;HALIM PERDANA KUSUMAH&quot; &quot;JATI PULO&quot;            
[239] &quot;KRAMAT JATI&quot;           &quot;PINANG RANTI&quot;         
[241] &quot;BALE KAMBANG&quot;          &quot;KALI BARU&quot;            
[243] &quot;RAWA JATI&quot;             &quot;KAMPUNG TENGAH&quot;       
[245] &quot;KERENDANG&quot;             &quot;PAL MERIAM&quot;           
[247] &quot;PULAU HARAPAN&quot;         &quot;PULAU KELAPA&quot;         
[249] &quot;PULAU PANGGANG&quot;        &quot;PULAU PARI&quot;           
[251] &quot;PULAU TIDUNG&quot;          &quot;PULAU UNTUNG JAWA&quot;    
[253] &quot;BALE KAMBANG&quot;          &quot;HALIM PERDANA KUSUMAH&quot;
[255] &quot;JATI PULO&quot;             &quot;KALI BARU&quot;            
[257] &quot;KAMPUNG TENGAH&quot;        &quot;KERENDANG&quot;            
[259] &quot;KRAMAT JATI&quot;           &quot;LUAR DKI JAKARTA&quot;     
[261] &quot;PAL MERIAM&quot;            &quot;PINANG RANTI&quot;         
[263] &quot;PROSES UPDATE DATA&quot;    &quot;PULAU HARAPAN&quot;        
[265] &quot;PULAU KELAPA&quot;          &quot;PULAU PANGGANG&quot;       
[267] &quot;PULAU PARI&quot;            &quot;PULAU TIDUNG&quot;         
[269] &quot;PULAU UNTUNG JAWA&quot;     &quot;RAWA JATI&quot;            
[271] &quot;BALE KAMBANG&quot;          &quot;HALIM PERDANA KUSUMAH&quot;
[273] &quot;JATI PULO&quot;             &quot;KALI BARU&quot;            
[275] &quot;KAMPUNG TENGAH&quot;        &quot;KERENDANG&quot;            
[277] &quot;KRAMAT JATI&quot;           &quot;LUAR DKI JAKARTA&quot;     
[279] &quot;PAL MERIAM&quot;            &quot;PINANG RANTI&quot;         
[281] &quot;PROSES UPDATE DATA&quot;    &quot;PULAU HARAPAN&quot;        
[283] &quot;PULAU KELAPA&quot;          &quot;PULAU PANGGANG&quot;       
[285] &quot;PULAU PARI&quot;            &quot;PULAU TIDUNG&quot;         
[287] &quot;PULAU UNTUNG JAWA&quot;     &quot;RAWA JATI&quot;            </code></pre>
</div>
<p>From the output, it is evident that the following sub-districts are spelled incorrectly:</p>
<ul>
<li>KRAMATJATI (Correct: ‘KRAMAT JATI’)</li>
<li>PAL MERAH (Correct ‘PALMERAH’)</li>
<li>PALMERIAM (Correct: ‘PAL MERIAM’)</li>
<li>KALIBARU (Correct: ‘KALI BARU’)</li>
<li>RAWAJATI (Correct: ‘RAWA JATI’)</li>
<li>JATIPULO (Correct: ‘JATI PULO’)</li>
<li>KRENDANG (Correct: ‘KERENDANG’)</li>
<li>PINANGRANTI (Correct: ‘PINANG RANTI’)</li>
<li>BALEKAMBANG (Correct: ‘BALE KAMBANG’)</li>
</ul>
<p>Apart from spelling mistakes,there were also sub-districts value that have have missing word</p>
<ul>
<li>TENGAH (Correct: ‘KAMPUNG TENGAH’)</li>
</ul>
<h3 id="clean-sub-district-data">9.2 Clean Sub-District Data</h3>
<p>The following code chunk corrects the misspelt sub-district in preparation for joining the attribute data &amp; spatial data in the next step.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='va'>DKI_Jakarta</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>Sub_District <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span> <span class='op'>==</span> <span class='st'>"KRAMATJATI"</span>, <span class='st'>"KRAMAT JATI"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='va'>DKI_Jakarta</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>District <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>District</span><span class='op'>)</span> <span class='op'>==</span> <span class='st'>"PAL MERAH"</span>, <span class='st'>"PALMERAH"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>District</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='va'>DKI_Jakarta</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>Sub_District <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span> <span class='op'>==</span> <span class='st'>"PALMERIAM"</span>, <span class='st'>"PAL MERIAM"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='va'>DKI_Jakarta</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>Sub_District <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span> <span class='op'>==</span> <span class='st'>"KALIBARU"</span>, <span class='st'>"KALI BARU"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='va'>DKI_Jakarta</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>Sub_District <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span> <span class='op'>==</span> <span class='st'>"RAWAJATI"</span>, <span class='st'>"RAWA JATI"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='va'>DKI_Jakarta</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>Sub_District <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span> <span class='op'>==</span> <span class='st'>"TENGAH"</span>, <span class='st'>"KAMPUNG TENGAH"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='va'>DKI_Jakarta</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>Sub_District <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span> <span class='op'>==</span> <span class='st'>"JATIPULO"</span>, <span class='st'>"JATI PULO"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='va'>DKI_Jakarta</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>Sub_District <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span> <span class='op'>==</span> <span class='st'>"KRENDANG"</span>, <span class='st'>"KERENDANG"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='va'>DKI_Jakarta</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>Sub_District <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span> <span class='op'>==</span> <span class='st'>"PINANGRANTI"</span>, <span class='st'>"PINANG RANTI"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='va'>DKI_Jakarta</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>Sub_District <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span> <span class='op'>==</span> <span class='st'>"BALEKAMBANG"</span>, <span class='st'>"BALE KAMBANG"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='va'>DKI_Jakarta</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>Sub_District <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span> <span class='op'>==</span> <span class='st'>"HALIM PERDANA KUSUMA"</span>, <span class='st'>"HALIM PERDANA KUSUMAH"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>DKI_Jakarta</span> <span class='op'>&lt;-</span> <span class='va'>DKI_Jakarta</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>Sub_District <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span> <span class='op'>==</span> <span class='st'>"PULOGADUNG"</span>, <span class='st'>"PULO GADUNG"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>Covid_DF</span><span class='op'>&lt;-</span> <span class='va'>Covid_DF</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>District <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>District</span><span class='op'>)</span> <span class='op'>==</span> <span class='st'>"KALI DERES"</span>, <span class='st'>"KALIDERES"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>District</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>Covid_DF</span><span class='op'>&lt;-</span> <span class='va'>Covid_DF</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>District <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>District</span><span class='op'>)</span> <span class='op'>==</span> <span class='st'>"KALI DERES"</span>, <span class='st'>"KALIDERES"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>District</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>  
<span class='co'>#LOOK INTOT HIS</span>

<span class='co'>#UntungJAWA</span>
</code></pre>
</div>
</div>
<h3 id="joining-the-attribute-data-spatial-data-1">9.3 Joining the Attribute Data &amp; Spatial Data</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Jakarta_Covid</span> <span class='op'>&lt;-</span> <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>DKI_Jakarta</span>, <span class='va'>Covid_DF</span>,
                          by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Sub_District"</span> <span class='op'>=</span> <span class='st'>"Sub_District"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="checking-sub-district-data">9.4 Checking Sub-District Data</h3>
<p>Plotting the cases against the map of Jakarta to verify that all the misspelled sub-district and district are corrected.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>Jakarta_Covid</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_fill</span><span class='op'>(</span><span class='st'>"Cases"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-34-1.png" width="624" /></p>
</div>
<p>From the output, we can see that all the data are now corrected.</p>
<h3 id="choropleth-mapping-actual">10. Choropleth Mapping (Actual)</h3>
<h4 id="cumulative-confirmed-cases">10.1 Cumulative Confirmed Cases</h4>
<h4 id="data-preparation">10.1.1 Data preparation</h4>
<p>The following code chunk will omit rows with missing month values and join the attribute data (Covid_DF) &amp; spatial data (DKI_Jakarta).</p>
<p>Following which, the cumulative confirmed cases per 10,0000 population will be calculated using the following formula:</p>
<p><span class="math display">\[ Monthly\ Cumulative\ Confirmed\ Cases\  = 
\frac{Total\ no\ of\ Covid-19\ cases\ at\ Sub-District\ 
Level}{(Total\ Population\ of\ the\ Sub-District) \ ÷\ 10,000}\]</span></p>
<p>Before that, we will need to inner join Covid_DF and DKI_Jakarta dataframe by “Sub_District” and then convert it into sf.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Jakarta_Covid_Cases</span> <span class='op'>&lt;-</span> <span class='va'>Covid_DF</span> <span class='op'>%&gt;%</span>
  <span class='fu'>inner_join</span><span class='op'>(</span><span class='va'>DKI_Jakarta</span>, by<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Sub_District"</span><span class='op'>=</span><span class='st'>"Sub_District"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>Sub_District</span>, <span class='va'>Date</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>`Covid Cases Per 10k Population` <span class='op'>=</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>Cases</span><span class='op'>)</span> <span class='op'>/</span> <span class='op'>(</span><span class='va'>Total_Population</span> <span class='op'>/</span> <span class='fl'>10000</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>Jakarta_Covid_Cases</span> <span class='op'>&lt;-</span> <span class='va'>Jakarta_Covid_Cases</span><span class='op'>%&gt;%</span> <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>DKI_Jakarta</span>, 
                       by<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Sub_District"</span><span class='op'>=</span><span class='st'>"Sub_District"</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>Jakarta_Covid_Cases</span><span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>Jakarta_Covid_Cases</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="plotting-choropleth-map-of-monthly-cumulative-confirmed-cases">10.1.2 Plotting Choropleth Map of Monthly Cumulative Confirmed Cases</h4>
<p>In the code chunk below, tm_shape() is used to define the input data (Jakarta_Covid_Cases) and tm_fill() is used to illustrate the monthly cumulative confirmed cases at sub-district level.</p>
<p>The choropleth map is plotted via a function called Monthly_Cases_Map with quantile data classification methods.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Monthly_Cases_Map</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>date</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>Jakarta_Covid_Cases</span> <span class='op'>&lt;-</span> <span class='va'>Jakarta_Covid_Cases</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Date</span> <span class='op'>==</span> <span class='va'>Date</span><span class='op'>)</span>
  <span class='va'>Month_Data</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"Cumulative Confirmed Cases per 10,000 population \n by Jakarta Sub-District as at"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>date</span><span class='op'>)</span>, sep<span class='op'>=</span><span class='st'>" "</span><span class='op'>)</span>
  <span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>Jakarta_Covid_Cases</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_fill</span><span class='op'>(</span><span class='st'>"Covid Cases Per 10k Population"</span>,n <span class='op'>=</span> <span class='fl'>5</span>, style<span class='op'>=</span><span class='st'>"jenks"</span>,
          legend.is.portrait <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>main.title <span class='op'>=</span> <span class='va'>Month_Data</span> ,
            main.title.position <span class='op'>=</span> <span class='st'>"center"</span>,
            main.title.size <span class='op'>=</span> <span class='fl'>0.75</span>,title.size <span class='op'>=</span> <span class='fl'>0.30</span>,
            legend.height <span class='op'>=</span> <span class='fl'>0.20</span>, 
            legend.width <span class='op'>=</span> <span class='fl'>0.35</span>, 
            legend.outside <span class='op'>=</span> <span class='cn'>FALSE</span>,
            legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"left"</span>, <span class='st'>"bottom"</span><span class='op'>)</span>,
            frame <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_compass</span><span class='op'>(</span>type<span class='op'>=</span><span class='st'>"4star"</span>, size <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_scale_bar</span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>0.15</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_grid</span><span class='op'>(</span>lwd <span class='op'>=</span> <span class='fl'>0.1</span>, alpha <span class='op'>=</span> <span class='fl'>0.2</span><span class='op'>)</span> 
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p>The function is then called to plot the cumulative Confirmed cases for March 2021.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>Monthly_Cases_Map</span><span class='op'>(</span><span class='st'>'2021-03-31'</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-38-1.png" width="624" /></p>
</div>
<h4 id="plotting-choropleth-map-between-march-2020---july-2021">10.1.3 Plotting Choropleth Map Between March 2020 - July 2021</h4>
<p>By using group by date in TM_FACETS, we can see the spatial-temporal patterns of COVID-19 case in DKI Jakarta between March 2020 to July 2021.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-39-1.png" width="1536" /></p>
</div>
<h4 id="cumulative-covid-19-death">10.1.2 Cumulative Covid-19 Death</h4>
<p>The following code chunk will omit rows with missing month values and join the attribute data (Covid_DF) &amp; spatial data (DKI_Jakarta).</p>
<p>Following which, the cumulative death per 10,0000 population will be calculated using the following formula:</p>
<p><span class="math display">\[ Monthly\ Cumulative\ Confirmed\ Death\  = 
\frac{Total\ no\ of\ Covid-19\ Death\ at\ Sub-District\ 
Level}{(Total\ Population\ of\ the\ Sub-District) ÷\ 10,000}\]</span></p>
<p>Before that, we will need to inner join Covid_DF and DKI_Jakarta dataframe by “Sub_District” and then convert it into sf.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Jakarta_Death</span> <span class='op'>&lt;-</span> <span class='va'>Covid_DF</span> <span class='op'>%&gt;%</span>
  <span class='fu'>inner_join</span><span class='op'>(</span><span class='va'>DKI_Jakarta</span>, by<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Sub_District"</span><span class='op'>=</span><span class='st'>"Sub_District"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>Sub_District</span>, <span class='va'>Date</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>`Covid Death Per 10k Population` <span class='op'>=</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>Death</span><span class='op'>)</span> <span class='op'>/</span> <span class='op'>(</span><span class='va'>Total_Population</span> <span class='op'>/</span> <span class='fl'>10000</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>  <span class='op'>%&gt;%</span> <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>Jakarta_Death</span>  <span class='op'>&lt;-</span> <span class='va'>Jakarta_Death</span> <span class='op'>%&gt;%</span> <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>DKI_Jakarta</span>, 
                       by<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Sub_District"</span><span class='op'>=</span><span class='st'>"Sub_District"</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>Jakarta_Death</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>Jakarta_Death</span> <span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">

</div>
<h4 id="plotting-choropleth-map-of-monthly-cumulative-death">10.2.2 Plotting Choropleth Map of Monthly Cumulative Death</h4>
<p>In the code chunk below, tm_shape() is used to define the input data (Jakarta_Covid_Cases) and tm_fill() is used to illustrate the monthly cumulative confirmed cases at sub-district level.</p>
<p>The choropleth map is plotted via a function called Monthly_Death_Map with quantile data classification methods.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Monthly_Death_Map</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>date</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>Jakarta_Death</span>  <span class='op'>&lt;-</span> <span class='va'>Jakarta_Death</span>  <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Date</span> <span class='op'>==</span> <span class='va'>date</span><span class='op'>)</span>
  <span class='va'>Month_Data</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"Cumulative Death per 10k population \n in Jakarta Sub-District as at"</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>date</span><span class='op'>)</span>, sep<span class='op'>=</span><span class='st'>" "</span><span class='op'>)</span>
  <span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>Jakarta_Death</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_fill</span><span class='op'>(</span><span class='st'>"Covid Death Per 10k Population"</span>, 
          legend.is.portrait <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>main.title <span class='op'>=</span> <span class='va'>Month_Data</span> ,
            main.title.position <span class='op'>=</span> <span class='st'>"center"</span>,
            main.title.size <span class='op'>=</span> <span class='fl'>0.75</span>,title.size <span class='op'>=</span> <span class='fl'>0.30</span>,
            legend.height <span class='op'>=</span> <span class='fl'>0.20</span>, 
            legend.width <span class='op'>=</span> <span class='fl'>0.35</span>, 
            legend.outside <span class='op'>=</span> <span class='cn'>FALSE</span>,
            legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"left"</span>, <span class='st'>"bottom"</span><span class='op'>)</span>,
            frame <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_compass</span><span class='op'>(</span>type<span class='op'>=</span><span class='st'>"4star"</span>, size <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_grid</span><span class='op'>(</span>lwd <span class='op'>=</span> <span class='fl'>0.1</span>, alpha <span class='op'>=</span> <span class='fl'>0.2</span><span class='op'>)</span> 
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p>The function is then called to plot the cumulative death for March 2021.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>Monthly_Death_Map</span><span class='op'>(</span><span class='st'>'2021-03-31'</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-43-1.png" width="624" /></p>
</div>
<h4 id="plotting-choropleth-map-between-march-2020---july-2021-1">10.1.3 Plotting Choropleth Map Between March 2020 - July 2021</h4>
<p>By using group by date in TM_FACETS, we can see the spatial-temporal patterns of COVID-19 death in DKI Jakarta between March 2020 to July 2021.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-44-1.png" width="1536" /></p>
</div>
<h3 id="animated-thematic-map">11. Animated Thematic Map</h3>
<h4 id="spatial-temporal-patterns-of-covid-19-case-in-dki-jakarta-over-time">11.1 Spatial-temporal patterns of COVID-19 case in DKI Jakarta Over Time</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>knitr</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/knitr/man/include_graphics.html'>include_graphics</a></span><span class='op'>(</span><span class='st'>"C:/Users/User/Desktop/IS415/lye-jia-wei/IS415_blog/_site/posts/2021-08-30-take-home-exercise-1/Covd_Cases_Animation.gif"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="C:/Users/User/Desktop/IS415/lye-jia-wei/IS415_blog/_site/posts/2021-08-30-take-home-exercise-1/Covd_Cases_Animation.gif" /><!-- --></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#Covd_Cases_Animation= tm_shape(Jakarta_Covid_Cases) + tm_fill("Covid Cases Per 10,000 Population",style = "quantile") + tm_facets(along = "Date", free.coords = FALSE)</span>
<span class='co'>#tmap_animation(Covd_Cases_Animation, filename = "Covd_Cases_Animation.gif", delay = 45)</span>
</code></pre>
</div>
</div>
<h4 id="spatial-temporal-patterns-of-covid-19-death-in-dki-jakarta-over-time">11.2 Spatial-temporal patterns of COVID-19 Death in DKI Jakarta Over Time</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#Covd_Death_Animation= tm_shape(Jakarta_Death) + tm_fill("Covid Death Per 10,000 Population",style = "quantile") + tm_facets(along = "Date", free.coords = FALSE)</span>
<span class='co'>#tmap_animation(Covd_Death_Animation, filename = "Covd_Death_Animation.gif", delay = 45)</span>
</code></pre>
</div>
</div>
<h3 id="analytical-map">10. Analytical Map</h3>
<h4 id="boxplot">10.1 Boxplot</h4>
<h5 id="bar-chart-of-top-10-sub-district-with-highest-covid-19-cases-per">10.1.1 Bar Chart of Top 10 Sub-District With Highest Covid-19 Cases Per</h5>
<p>10,000 Population</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Jakarta_Covid_Sub_District</span> <span class='op'>&lt;-</span> <span class='va'>Covid_DF</span> <span class='op'>%&gt;%</span>
  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>DKI_Jakarta</span>, by<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Sub_District"</span><span class='op'>=</span><span class='st'>"Sub_District"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>`Covid` <span class='op'>=</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>Cases</span><span class='op'>)</span> <span class='op'>/</span> <span class='op'>(</span><span class='va'>Total_Population</span> <span class='op'>/</span> <span class='fl'>10000</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span> <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>Jakarta_Covid_Sub_District</span> <span class='op'>&lt;-</span><span class='va'>Jakarta_Covid_Sub_District</span><span class='op'>[</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>Jakarta_Covid_Sub_District</span><span class='op'>)</span>, <span class='op'>]</span>
<span class='va'>Jakarta_Covid_Sub_District</span> <span class='op'>&lt;-</span> <span class='va'>Jakarta_Covid_Sub_District</span> <span class='op'>%&gt;%</span> <span class='fu'>drop_na</span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>Jakarta_Covid_Sub_District</span><span class='op'>$</span><span class='va'>Covid</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>Jakarta_Covid_Sub_District</span><span class='op'>$</span><span class='va'>Covid</span> ,<span class='fl'>0</span><span class='op'>)</span>

<span class='va'>Jakarta_Covid_Sub_District</span> <span class='op'>&lt;-</span> <span class='va'>Jakarta_Covid_Sub_District</span>  <span class='op'>%&gt;%</span><span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span>


<span class='fu'>top_n</span><span class='op'>(</span><span class='va'>Jakarta_Covid_Sub_District</span>, n<span class='op'>=</span><span class='fl'>10</span>, <span class='va'>Covid</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
          <span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>.</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>Covid</span>, y<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/stats/reorder.factor.html'>reorder</a></span><span class='op'>(</span><span class='va'>Sub_District</span>, <span class='va'>Covid</span><span class='op'>)</span>,label<span class='op'>=</span> <span class='op'>(</span><span class='va'>Covid</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
              <span class='fu'>geom_bar</span><span class='op'>(</span>stat<span class='op'>=</span><span class='st'>'identity'</span><span class='op'>)</span><span class='op'>+</span> 
  <span class='fu'>geom_col</span><span class='op'>(</span>fill<span class='op'>=</span><span class='st'>'darksalmon'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>title<span class='op'>=</span><span class='st'>'Top 10 Sub-District With Highest Covid-19 Cases Per 10k Population'</span>,
       x<span class='op'>=</span><span class='st'>'No of Covid Cases'</span>,
       y<span class='op'>=</span><span class='st'>'Sub-District'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_text</span><span class='op'>(</span>nudge_x<span class='op'>=</span><span class='op'>-</span><span class='fl'>900.85</span>,vjust <span class='op'>=</span> <span class='fl'>0.5</span>, colour<span class='op'>=</span><span class='st'>'gray23'</span>, size<span class='op'>=</span><span class='fl'>2.87</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_minimal</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-48-1.png" width="624" /></p>
</div>
<h5 id="bar-chart-of-top-10-sub-district-with-highest-covid-19-death-per">10.1.2 Bar Chart of Top 10 Sub-District With Highest Covid-19 Death Per</h5>
<p>10,000 Population</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Jakarta_Death_Sub_District</span> <span class='op'>&lt;-</span> <span class='va'>Covid_DF</span> <span class='op'>%&gt;%</span>
  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>DKI_Jakarta</span>, by<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Sub_District"</span><span class='op'>=</span><span class='st'>"Sub_District"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>Sub_District</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>DeathC <span class='op'>=</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>Death</span><span class='op'>)</span> <span class='op'>/</span> <span class='op'>(</span><span class='va'>Total_Population</span> <span class='op'>/</span> <span class='fl'>10000</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>Jakarta_Death_Sub_District</span> <span class='op'>&lt;-</span><span class='va'>Jakarta_Death_Sub_District</span><span class='op'>[</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>Jakarta_Death_Sub_District</span><span class='op'>)</span>, <span class='op'>]</span>
<span class='va'>Jakarta_Death_Sub_District</span> <span class='op'>&lt;-</span> <span class='va'>Jakarta_Death_Sub_District</span> <span class='op'>%&gt;%</span> <span class='fu'>drop_na</span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>Jakarta_Death_Sub_District</span><span class='op'>$</span><span class='va'>DeathC</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>Jakarta_Death_Sub_District</span><span class='op'>$</span><span class='va'>DeathC</span> ,<span class='fl'>0</span><span class='op'>)</span>


<span class='va'>Jakarta_Death_Sub_District</span> <span class='op'>&lt;-</span> <span class='va'>Jakarta_Death_Sub_District</span> <span class='op'>%&gt;%</span><span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span>





<span class='fu'>top_n</span><span class='op'>(</span><span class='va'>Jakarta_Death_Sub_District</span>, n<span class='op'>=</span><span class='fl'>10</span>, <span class='va'>DeathC</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
          <span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>.</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>DeathC</span>, y<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/stats/reorder.factor.html'>reorder</a></span><span class='op'>(</span><span class='va'>Sub_District</span>, <span class='va'>DeathC</span><span class='op'>)</span>,label<span class='op'>=</span> <span class='op'>(</span><span class='va'>DeathC</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
              <span class='fu'>geom_bar</span><span class='op'>(</span>stat<span class='op'>=</span><span class='st'>'identity'</span><span class='op'>)</span><span class='op'>+</span> 
  <span class='fu'>geom_col</span><span class='op'>(</span>fill<span class='op'>=</span><span class='st'>'darksalmon'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>title<span class='op'>=</span><span class='st'>'Top 10 Sub-District With Highest Covid-19 Death Per 10k Population'</span>,
       x<span class='op'>=</span><span class='st'>'No of Death'</span>,
       y<span class='op'>=</span><span class='st'>'Sub-District'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_text</span><span class='op'>(</span>nudge_x<span class='op'>=</span><span class='op'>-</span><span class='fl'>7.85</span>,vjust <span class='op'>=</span> <span class='fl'>0.5</span>, colour<span class='op'>=</span><span class='st'>'gray23'</span>, size<span class='op'>=</span><span class='fl'>2.87</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_minimal</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>theme</span><span class='op'>(</span>plot.title <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size<span class='op'>=</span><span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-49-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># To create break points for box map</span>
<span class='va'>boxbreaks</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>v</span>, <span class='va'>mult</span><span class='op'>=</span><span class='fl'>1.5</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>qv</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/unname.html'>unname</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>v</span><span class='op'>)</span><span class='op'>)</span>
  <span class='va'>iqr</span> <span class='op'>&lt;-</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>4</span><span class='op'>]</span> <span class='op'>-</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span>
  <span class='co'># upfence and lofence define the area where points will be defined as outliers</span>
  <span class='va'>upfence</span> <span class='op'>&lt;-</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>4</span><span class='op'>]</span> <span class='op'>+</span> <span class='va'>mult</span> <span class='op'>*</span> <span class='va'>iqr</span>
  <span class='va'>lofence</span> <span class='op'>&lt;-</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>-</span> <span class='va'>mult</span> <span class='op'>*</span> <span class='va'>iqr</span>
  <span class='co'># initialize break points vector</span>
  <span class='va'>bb</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/vector.html'>vector</a></span><span class='op'>(</span>mode<span class='op'>=</span><span class='st'>"numeric"</span>,length<span class='op'>=</span><span class='fl'>7</span><span class='op'>)</span>
  <span class='co'># logic for lower and upper fences</span>
  <span class='kw'>if</span> <span class='op'>(</span><span class='va'>lofence</span> <span class='op'>&lt;</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>{</span> <span class='co'># no lower outliers</span>
  <span class='va'>bb</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>lofence</span>
  <span class='va'>bb</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>floor</a></span><span class='op'>(</span><span class='va'>qv</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>
  <span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span>
  <span class='va'>bb</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>lofence</span>
  <span class='va'>bb</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>
  <span class='op'>}</span>
  <span class='kw'>if</span> <span class='op'>(</span><span class='va'>upfence</span> <span class='op'>&gt;</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>5</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>{</span> <span class='co'># no upper outliers</span>
  <span class='va'>bb</span><span class='op'>[</span><span class='fl'>7</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>upfence</span>
  <span class='va'>bb</span><span class='op'>[</span><span class='fl'>6</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>ceiling</a></span><span class='op'>(</span><span class='va'>qv</span><span class='op'>[</span><span class='fl'>5</span><span class='op'>]</span><span class='op'>)</span>
  <span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span>
  <span class='va'>bb</span><span class='op'>[</span><span class='fl'>6</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>upfence</span>
  <span class='va'>bb</span><span class='op'>[</span><span class='fl'>7</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>5</span><span class='op'>]</span>
  <span class='op'>}</span>
  <span class='va'>bb</span><span class='op'>[</span><span class='fl'>3</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>qv</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>]</span>
  <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='va'>bb</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># Extract variable as vector out of sf dataframe</span>
<span class='va'>get.var</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>vname</span>, <span class='va'>df</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>v</span> <span class='op'>&lt;-</span> <span class='va'>df</span><span class='op'>[</span><span class='va'>vname</span><span class='op'>]</span> <span class='op'>%&gt;%</span> <span class='fu'>st_set_geometry</span><span class='op'>(</span><span class='cn'>NULL</span><span class='op'>)</span>
  <span class='va'>v</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/unname.html'>unname</a></span><span class='op'>(</span><span class='va'>v</span><span class='op'>[</span>,<span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>
  <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='va'>v</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># Boxmap function</span>
<span class='va'>boxmap</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>vnam</span>, <span class='va'>df</span>, <span class='va'>mtitle</span>, <span class='va'>legtitle</span><span class='op'>=</span><span class='cn'>NA</span>, <span class='va'>mult</span><span class='op'>=</span><span class='fl'>1.5</span>, <span class='va'>palette</span><span class='op'>=</span><span class='st'>'-RdBu'</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>df1</span> <span class='op'>&lt;-</span> <span class='fu'>drop_na</span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span>
  <span class='va'>var</span> <span class='op'>&lt;-</span> <span class='fu'>get.var</span><span class='op'>(</span><span class='va'>vnam</span>,<span class='va'>df1</span><span class='op'>)</span>
  <span class='va'>bb</span> <span class='op'>&lt;-</span> <span class='fu'>boxbreaks</span><span class='op'>(</span><span class='va'>var</span><span class='op'>)</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>tm_fill</span><span class='op'>(</span><span class='va'>vnam</span>,
            title<span class='op'>=</span><span class='va'>legtitle</span>,
            breaks<span class='op'>=</span><span class='va'>bb</span>,
            palette<span class='op'>=</span><span class='st'>"Blues"</span>,
            labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Lower outlier"</span>, <span class='st'>"&lt; 25%"</span>, <span class='st'>"25% - 50%"</span>, <span class='st'>"50% - 75%"</span>,<span class='st'>"&gt; 75%"</span>, <span class='st'>"Upper outlier"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>lwd<span class='op'>=</span><span class='fl'>0.1</span>, alpha<span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>main.title <span class='op'>=</span> <span class='va'>mtitle</span>,
            main.title.position <span class='op'>=</span> <span class='st'>'center'</span>,
            main.title.size <span class='op'>=</span> <span class='fl'>1</span>,
            frame <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_scale_bar</span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>0.15</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># Boxmap function with points overlayed on top of choropleth map</span>
<span class='va'>boxmap_pts</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>vnam</span>, <span class='va'>df</span>, <span class='va'>pointdf</span>, <span class='va'>mtitle</span>, <span class='va'>legtitle</span><span class='op'>=</span><span class='cn'>NA</span>, <span class='va'>mult</span><span class='op'>=</span><span class='fl'>1.5</span>, <span class='va'>palette</span><span class='op'>=</span><span class='st'>'-RdBu'</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'>boxmap</span><span class='op'>(</span><span class='va'>vnam</span>, <span class='va'>df</span>, <span class='va'>mtitle</span>, legtitle<span class='op'>=</span><span class='va'>legtitle</span>, mult<span class='op'>=</span><span class='va'>mult</span>, palette<span class='op'>=</span><span class='va'>palette</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>pointdf</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>tm_dots</span><span class='op'>(</span>col<span class='op'>=</span><span class='st'>"gray23"</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='va'>dd_boxmap17</span> <span class='op'>&lt;-</span> <span class='fu'>boxmap</span><span class='op'>(</span><span class='st'>"Cases"</span>, <span class='va'>Jakarta_Covid</span>, mtitle<span class='op'>=</span><span class='st'>"Jakarta Covid Cases (Mar 2020 - July 2021)"</span><span class='op'>)</span>
<span class='va'>dd_boxmap17</span>
</code></pre>
</div>
<p><img src="take-home-exercise-1_files/figure-html5/unnamed-chunk-50-1.png" width="624" /></p>
</div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
